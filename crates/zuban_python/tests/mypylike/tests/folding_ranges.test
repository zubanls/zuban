[case folding_ranges_basic_without_imports]
#? folding-ranges

def f(x):
    str(x + 1)

    str(x + 1)  # asdf
    #

# 
str

[out]
__main__.py:2: Folding Ranges:
- 3:9-6:22 Region

[case folding_ranges_basic_with_imports]
# flags: --no-windows
#? folding-ranges
import typing

from typing import Protocol

try:
    import types
except ImportError: ...

def f(x):
    if bool():
        str(x + 1)
str
import typing
import types

[out]
__main__.py:3: Folding Ranges:
- 1:0-5:27 Imports
- 7:4-8:16 Region
- 11:9-13:18 Region
- 12:14-13:18 Region

[case folding_ranges_basic_syntax_blocks]
#? folding-ranges

class X:
    def f(self, something):
        import typing
        if bool():
            str
        elif something: ...
        elif bool(something):
            ...
        else:
            ...
            ...
        for x in something:
            x
        for x in something:
            x
        else:
            ...
        while something:
            something
        while something:
            something
        else:
            ...
        with something:  # Something
            ...
[out]
__main__.py:2: Folding Ranges:
- 3:8-27:15 Region
- 4:27-27:15 Region
- 6:18-7:15 Region
- 9:29-10:15 Region
- 11:13-13:15 Region
- 14:27-15:13 Region
- 16:27-17:13 Region
- 18:13-19:15 Region
- 20:24-21:21 Region
- 22:24-23:21 Region
- 24:13-25:15 Region
- 26:36-27:15 Region

[case folding_ranges_try_except]
#? folding-ranges

def f(something, something_else) -> None:
    import typing
    try:
        str
    except something: ...
    except something_else:
        ...
        ...
        ...
    except NotImplementedError:
        ...
    else:
        something
    finally:
        something

[out]
__main__.py:2: Folding Ranges:
- 3:41-17:17 Region
- 5:8-6:11 Region
- 8:26-11:11 Region
- 12:31-13:11 Region
- 14:9-15:17 Region
- 16:12-17:17 Region

[case folding_ranges_match]
# flags: --no-windows
#? folding-ranges
import typing

def f(something) -> None:
    match something:
        case { a: b as c }:
            ...
        case (1, 2):
            ...
        case typing.Final: ...
        case foo:
            ...  # ho
    # hi
[out]
__main__.py:3: Folding Ranges:
- 1:0-3:13 Imports
- 5:25-13:21 Region
- 6:20-13:21 Region
- 7:27-8:15 Region
- 9:20-10:15 Region
- 12:17-13:21 Region

[case folding_ranges_async]
#? folding-ranges
async def foo(something):
    await bar()
    async for x in something:
        x()
    async for x in something:
        x()
    else:
        print(something)

    async with (
        something as bar,
        something.foo
    ):
        bar.lala

@foo
async def bar():
    ...

[out]
__main__.py:2: Folding Ranges:
- 2:25-15:16 Region
- 4:29-5:11 Region
- 6:29-7:11 Region
- 8:9-9:24 Region
- 14:6-15:16 Region
- 18:16-19:7 Region

[case multi_line_function_definition_folding]
#? folding-ranges
def f(
    x: str,
    y: str,
    *,
    z: str) -> None:
    ...
    ...
    pass
    ...

x = 1
[out]
__main__.py:2: Folding Ranges:
- 6:20-10:7 Region

[case if_nested_folding_range]
#? folding-ranges
def f() -> None:
    if bool():
        if bool():
            ...
    else:
        ...
[out]
__main__.py:2: Folding Ranges:
- 2:16-7:11 Region
- 3:14-5:15 Region
- 4:18-5:15 Region
- 6:9-7:11 Region
